<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aurum - L'Excellence à Votre Portée</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css" />
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <script src="assets/js/auth.js"></script>
</head>

<body>
  <header id="app-header" class="header">
      <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
          <a href="index.html" style="font-family:'Playfair Display'; font-weight:700; font-size:24px; color:#000; text-decoration:none;">AURUM</a>
          <nav>
              <a href="catalogue.html" style="margin-right:15px; color:#000; text-decoration:none;">Catalogue</a>
              <a href="login.html" style="margin-right:15px; color:#000; text-decoration:none;">Connexion</a>
              <a href="cart.html" style="color:#000; text-decoration:none;"><i data-lucide="shopping-bag"></i></a>
          </nav>
      </div>
  </header>
  
  <main>
    <section class="hero" style="background:#0F0F0F; color:white; padding:80px 0; text-align:center;">
      <div class="container">
        <h1 style="color:white; font-size:3rem; margin-bottom:10px;">L'Excellence à Votre Portée</h1>
        <p style="color:#ccc; margin-bottom:30px;">Le meilleur du style, livré chez vous.</p>
        <a href="catalogue.html" class="btn btn-gold" style="background:#D4AF37; color:black; padding:12px 30px; text-decoration:none; font-weight:bold; border-radius:5px;">Découvrir la collection</a>
      </div>
    </section>

    <section class="section container" style="padding:60px 0;">
      <h2 class="section-title">Nos Univers</h2>
      <div class="category-carousel" id="category-list" style="display:flex; gap:20px; overflow-x:auto; padding-bottom:20px;">
        <p>Chargement des catégories...</p>
      </div>
    </section>

    <section class="section container">
      <h2 class="section-title">Nouveautés</h2>
      <div id="home-new" class="product-list" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:20px;">
        <p>Chargement des produits...</p>
      </div>
    </section>

    <section class="section container">
      <h2 class="section-title">Promotions</h2>
      <div id="home-promos" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px;">
         </div>
    </section>
  </main>

  <footer style="background:#000; color:white; padding:40px 0; text-align:center; margin-top:60px;">
      <p>&copy; 2026 Aurum Marketplace</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const db = firebase.firestore();

        // 1. LOAD CATEGORIES
        db.collection('categories').get().then(snap => {
            const container = document.getElementById('category-list');
            if(container) {
                container.innerHTML = "";
                snap.forEach(doc => {
                    const c = doc.data();
                    container.innerHTML += `
                        <a href="catalogue.html?cat=${c.name}" class="category-card" style="min-width:120px; text-align:center; text-decoration:none; color:black;">
                            <div style="width:80px; height:80px; background:#f5f5f5; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 10px;">
                                <i data-lucide="${c.icon || 'tag'}" style="width:30px; height:30px;"></i>
                            </div>
                            <span style="font-weight:600; font-size:14px;">${c.name}</span>
                        </a>
                    `;
                });
                lucide.createIcons();
            }
        });

        // 2. LOAD NEW PRODUCTS
        db.collection('products').orderBy('createdAt', 'desc').limit(8).get().then(snap => {
            const container = document.getElementById('home-new');
            if(container) {
                container.innerHTML = "";
                snap.forEach(doc => {
                    const p = doc.data();
                    const price = new Intl.NumberFormat('fr-FR').format(p.price);
                    container.innerHTML += `
                        <article class="product-card" style="border:1px solid #eee; border-radius:10px; overflow:hidden;">
                            <a href="product.html?id=${doc.id}">
                                <img src="${p.image || 'assets/img/placeholder.png'}" style="width:100%; height:200px; object-fit:cover;">
                            </a>
                            <div style="padding:15px;">
                                <a href="boutique.html?id=${p.shopId}" style="font-size:11px; color:#666; text-transform:uppercase; text-decoration:none; display:block; margin-bottom:5px;">
                                    Vendu par : <b>${p.shopName}</b>
                                </a>
                                <h3 style="font-size:16px; margin:0 0 5px;"><a href="product.html?id=${doc.id}" style="color:black; text-decoration:none;">${p.name}</a></h3>
                                <div style="font-weight:bold; color:#D4AF37;">${price} FCFA</div>
                            </div>
                        </article>
                    `;
                });
            }
        });

        // 3. LOAD PROMOS
        db.collection('promos').where('status', '==', 'active').limit(4).get().then(snap => {
            const container = document.getElementById('home-promos');
            if(container) {
                container.innerHTML = "";
                if(snap.empty) {
                    container.innerHTML = "<p>Aucune promo pour le moment.</p>";
                } else {
                    snap.forEach(doc => {
                        const pr = doc.data();
                        container.innerHTML += `
                            <div style="background:#D4AF37; color:black; padding:20px; border-radius:10px; text-align:center;">
                                <h3 style="font-size:24px; margin:0;">${pr.percent}% OFF</h3>
                                <p>Code : <b>${pr.code}</b></p>
                            </div>
                        `;
                    });
                }
            }
        });
    });
  </script>
</body>
</html>
