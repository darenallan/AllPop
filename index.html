<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aurum - L'Excellence à Votre Portée</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="assets/css/styles.css" />
  
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <script src="assets/js/auth.js"></script>
</head>

<body>
  <header id="app-header" class="header">
      <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
          <a href="index.html" class="brand-name">AURUM</a>
          <nav class="nav-actions">
              <a href="catalogue.html" class="btn btn-sm btn-outline">Catalogue</a>
              <a href="seller.html" class="btn btn-sm btn-dark">Espace Vendeur</a>
              <a href="cart.html" class="icon-btn"><i data-lucide="shopping-bag"></i></a>
              <button class="menu-toggle" id="mobile-menu-btn"><i data-lucide="menu"></i></button>
          </nav>
      </div>
  </header>
  
  <main>
    <section class="hero">
      <div class="container">
        <h1>L'Excellence à Votre Portée</h1>
        <p class="hero-sub">L'excellence du style Burkinabè, livrée chez vous.</p>
        <div class="cta">
          <a href="catalogue.html" class="btn btn-gold">Découvrir la collection</a>
        </div>
      </div>
      <div class="hero-img" style="background-image: url('assets/img/hero.png');"></div>
    </section>

    <section class="section container">
      <h2 class="section-title">Qu'est-ce qui vous intéresse aujourd'hui ?</h2>
      <div class="category-carousel-wrapper">
        <div class="category-carousel" id="category-carousel">
          <p style="padding:20px;">Chargement des catégories...</p>
        </div>
      </div>
    </section>

    <section class="section container">
      <h2 class="section-title">Nouveautés</h2>
      <div id="home-new" class="grid grid-4">
          <p>Chargement des pépites...</p>
      </div>
    </section>

    <section class="section container">
      <h2 class="section-title">Promotions</h2>
      <div id="home-promos" class="grid grid-4">
          </div>
    </section>

    <section class="section testimonials-section">
      <div class="container">
        <h2 class="section-title">Ils nous font confiance</h2>
        <div class="testimonials-slider">
             <article class="testimonial-card">
                <div class="testimonial-header">
                    <div class="testimonial-avatar" style="background:#eee;">M</div>
                    <div>
                        <h4 class="testimonial-name">Mariam O.</h4>
                        <span class="testimonial-role">Cliente Fidèle</span>
                    </div>
                </div>
                <blockquote class="testimonial-content">« Service impeccable et produits de qualité. »</blockquote>
             </article>
             </div>
      </div>
    </section>
  </main>

  <footer class="footer">
      <div class="container text-center">
          <p>&copy; 2026 Aurum Marketplace</p>
      </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // 1. Charger les CATÉGORIES
        db.collection('categories').get().then(snap => {
            const container = document.getElementById('category-carousel');
            if(container && !snap.empty) {
                container.innerHTML = "";
                snap.forEach(doc => {
                    const c = doc.data();
                    container.innerHTML += `
                        <a href="catalogue.html?cat=${c.name}" class="category-card">
                            <div class="category-card-icon">
                                <i data-lucide="${c.icon || 'tag'}"></i>
                            </div>
                            <span class="category-card-label">${c.name}</span>
                        </a>
                    `;
                });
                lucide.createIcons();
            }
        });

        // 2. Charger les NOUVEAUTÉS
        db.collection('products').orderBy('createdAt', 'desc').limit(8).get().then(snap => {
            const container = document.getElementById('home-new');
            if(container) {
                container.innerHTML = "";
                if(snap.empty) container.innerHTML = "<p>Aucun produit pour le moment.</p>";
                
                snap.forEach(doc => {
                    const p = doc.data();
                    const price = new Intl.NumberFormat('fr-FR').format(p.price);
                    
                    container.innerHTML += `
                        <div class="card product-card">
                            <a href="product.html?id=${doc.id}" style="text-decoration:none; color:inherit;">
                                <div class="card-img">
                                    <img src="${p.image || 'assets/img/placeholder-product-1.svg'}" alt="${p.name}">
                                </div>
                            </a>
                            <div class="info">
                                <div style="font-size:12px; color:#666; margin-bottom:5px;">
                                    <a href="boutique.html?id=${p.shopId}" class="shop-link" style="text-decoration:none; color:#666;">
                                        <i data-lucide="store" style="width:12px;"></i> ${p.shopName || 'Boutique'}
                                    </a>
                                </div>
                                <h3 class="product-name"><a href="product.html?id=${doc.id}">${p.name}</a></h3>
                                <div class="price">${price} FCFA</div>
                            </div>
                        </div>
                    `;
                });
                lucide.createIcons();
            }
        });
    });
  </script>
</body>
</html>
